(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{9728:(e,s,t)=>{Promise.resolve().then(t.bind(t,1172))},550:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});var a=t(5155),c=t(1536);let l=()=>(0,a.jsx)("div",{className:"flex flex-col justify-center items-center gap-4 h-screen bg-[#fbc2c8]",children:(0,a.jsx)(c.hW,{className:"animate-spin text-4xl text-text",fill:"#0b0d1d",size:40})})},1172:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>g});var a=t(5155),c=t(2115),l=t(8897),n=t.n(l),i=t(2461),r=t(6046);let o=()=>{let[e,s]=(0,c.useState)(!0),[t,a]=(0,c.useState)(!1),l=(0,r.useRouter)();(0,c.useEffect)(()=>{let e=localStorage.getItem("token");if(!e){l.push("/");return}i.s.emit("check-auth",{token:e});let t=e=>{e.authenticated?s(!1):l.push("/login")};return i.s.on("auth-status",t),i.s.on("conectado-front",()=>a(!0)),i.s.on("desconectado-front",()=>a(!1)),()=>{i.s.off("auth-status",t),i.s.off("conectado-front"),i.s.off("desconectado-front")}},[l]);let o=()=>{let e=document.getElementById("qr-img");e&&(e.src="/qr.png")};return(0,c.useEffect)(()=>(i.s.on("qr-updated",o),()=>{i.s.off("qr-updated",o)}),[]),{loading:e,isConnected:t,handleQRCodeClick:()=>{n().fire({title:"C\xf3digo QR",text:"Este es un ejemplo de alerta usando SweetAlert2.",icon:"info",html:'\n        <div class="flex justify-center">\n          <img id="qr-img" src="/qr.png" />\n        </div>\n      ',confirmButtonText:"Entendido"})}}};var d=t(550),x=t(6280),m=t(1589),f=t(648);let p=()=>{localStorage.removeItem("token"),location.reload()};var h=t(6084);let u=e=>{let{order:s}=e,t=(e,s,t)=>(0,a.jsxs)("div",{className:"flex gap-2 text-text",children:[(0,a.jsxs)("h2",{className:"font-semibold",children:[e,":"]}),(0,a.jsx)("p",{className:"text-gray-700",children:s||t})]});return(0,a.jsx)("div",{className:"px-10 py-8 bg-slate-50 shadow-lg rounded-lg text-text",children:(0,a.jsxs)("div",{className:"flex justify-between gap-8  bg-slate-100 p-6 rounded-lg",children:[(0,a.jsxs)("div",{id:"productOrderDetails",className:"w-1/2 ",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-text",children:s.producto}),t("Salsas",s.salsas,"No aplica"),t("Toppings",s.toppings,"No aplica"),t("Extras",s.extras,"Sin extras")]}),(0,a.jsxs)("div",{id:"productPayDetails",className:"w-1/2 flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex gap-4 w-full",children:[(0,a.jsx)("h2",{className:"font-semibold",children:"Datos de entrega:"}),(0,a.jsx)("p",{className:"text-gray-700 break-words max-w-[80%]",children:s.datosEntrega||"Sin direcci\xf3n proporcionada"})]}),t("M\xe9todo de pago",s.metodoPago,"No especificado"),t("Total",s.cuenta,"No especificado"),s.comprobante.includes("media")?(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("p",{children:"Ver comprobante en"}),(0,a.jsx)("a",{className:"font-bold text-green-600 hover:text-green-500  transition-colors cursor-pointer",target:"_blank",href:"https://wa.me/".concat(s.whatsapp),children:"whatsapp"})]}):(0,a.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,a.jsxs)("p",{children:["Cambio: ",s.comprobante]}),(0,a.jsx)("a",{className:"font-semibold bg-green-600 cursor-pointer rounded-2xl text-mywhite py-1 px-2",target:"_blank",href:"https://wa.me/".concat(s.whatsapp),children:"abrir whatsapp"})]})]})]})})},j=e=>{let{order:s}=e,[t,l]=(0,c.useState)(s.estado),[r,o]=(0,c.useState)({date:"",time:""});(0,c.useEffect)(()=>{l(s.estado)},[s]);let d=e=>{l(e),i.s.emit("update-order",{orderNumber:s.numeroDeOrden,newState:e})},x=async e=>{let s=e.target.value;if("Enviado"===s&&(await n().fire({title:"\xbfDeseas marcar como enviado?",icon:"warning",confirmButtonText:"Aceptar",showCancelButton:!0,cancelButtonText:"Cancelar"})).isConfirmed)try{d(s)}catch(e){console.log(e)}};return(0,c.useEffect)(()=>{if(s.fecha){let[e,t,a,c]=s.fecha.split(" ");o({time:e,date:"".concat(a," ").concat(t," ").concat(c)})}},[s.fecha]),(0,a.jsx)("li",{className:"text-text",children:(0,a.jsxs)("details",{className:"border-t border-b border-light-gray hover:bg-slate-100 cursor-pointer",children:[(0,a.jsxs)("summary",{className:"p-6 grid grid-cols-8 gap-10 text-sm",children:[(0,a.jsxs)("section",{id:"numeroOrden",className:"flex justify-center items-center",children:["#",s.numeroDeOrden||"S/N"]}),(0,a.jsxs)("section",{id:"date",className:"flex flex-col items-center",children:[(0,a.jsx)("p",{children:r.time}),(0,a.jsx)("p",{children:r.date})]}),(0,a.jsx)("div",{id:"product",className:"flex justify-start items-center",children:(0,a.jsx)("p",{className:"line-clamp-2 max-w-xs max-h-[40px] overflow-hidden text-ellipsis",children:s.producto})}),(0,a.jsx)("section",{id:"Salsas/Toppings",className:"flex justify-center items-center",children:(0,a.jsx)("p",{className:"line-clamp-2 max-w-xs max-h-[40px] overflow-hidden text-ellipsis",children:s.salsas&&"Salsas: ".concat(s.salsas)})}),(0,a.jsx)("section",{id:"Extras",className:"flex justify-center text-center items-center",children:s.extras||"Sin extras"}),(0,a.jsx)("section",{id:"Metodo de pago",className:"flex justify-center items-center",children:s.metodoPago&&s.metodoPago.includes("Nequi")?"Nequi":s.metodoPago}),(0,a.jsx)("section",{id:"status",className:"flex justify-center items-center",children:"En proceso"===t?(0,a.jsxs)("select",{className:"bg-[#fff5d6] text-[#fdc824] font-semibold cursor-pointer px-2 py-1 rounded-xl uppercase",value:t,onChange:x,children:[(0,a.jsx)("option",{value:"En proceso",className:"text-text capitalize",children:"En Proceso"}),(0,a.jsx)("option",{value:"Enviado",className:"text-text capitalize",children:"Enviado"})]}):(0,a.jsx)("span",{className:"bg-[#cff0e6] text-[#5bc9a8] font-semibold px-2 py-1 rounded-xl uppercase flex items-center",children:"Enviado"})}),(0,a.jsx)("section",{id:"account",className:"flex justify-center font-semibold items-center",children:s.cuenta})]}),(0,a.jsx)(u,{order:s})]})})};t(5565);let g=()=>{let{loading:e,handleQRCodeClick:s}=o(),[t,l]=(0,c.useState)([]),[r,u]=(0,c.useState)(!1),[g,N]=(0,c.useState)(!1),b=!1,v=()=>{b||(b=!0)};(0,c.useEffect)(()=>(document.addEventListener("click",v),i.s.on("new-order",e=>{e.some(e=>"En proceso"===e.estado)&&(b&&new Audio("/audio/notificacion.mp3").play(),n().fire({title:"\xa1Nuevo Pedido!",text:"Tienes un nuevo pedido en sistema",icon:"info",confirmButtonText:"Aceptar"})),l(e)}),i.s.on("get-orders",e=>{l(e)}),i.s.on("conectado-front",()=>{u(!0),console.log("Sock connect")}),i.s.on("desconectado-front",()=>{u(!1),console.log("Es false")}),()=>{i.s.off("new-order"),i.s.off("get-orders"),i.s.off("conectado-front"),i.s.off("desconectado-front")}),[]);let y=()=>{N(!0),setTimeout(()=>{N(!1)},1500)};return e?(0,a.jsx)(d.A,{}):(0,a.jsxs)(c.Fragment,{children:[(0,a.jsx)("div",{className:"w-full h-screen bg-[#fbc2c8]  items-center justify-center fixed z-[999999999999] flex md:hidden",children:(0,a.jsx)("p",{className:"font-semibold text-center px-4",children:"     Aplicacion solo disponible en Escritorio  "})}),(0,a.jsx)("div",{className:"dashboard min-h-screen bg-mywhite hidden md:flex justify-center pb-20 ",children:(0,a.jsxs)("div",{className:"w-[90vw] flex flex-col gap-5 pt-16",children:[(0,a.jsxs)("div",{className:"p-6 rounded-xl flex justify-between items-center ",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)("h2",{className:"text-4xl font-semibold text-text",children:" \xa1Bienvenido!\uD83C\uDF53"})}),(0,a.jsx)("div",{className:"conectado-container font-light",children:r?(0,a.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,a.jsx)(m.Qp1,{color:"lightgreen",size:13}),(0,a.jsx)("p",{className:"font-medium",children:"Conectado"})]}):(0,a.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,a.jsx)(m.Qp1,{color:"orange",size:13}),(0,a.jsx)("p",{className:"font-medium",children:"Desconectado"})]})})]}),(0,a.jsxs)("div",{className:"flex gap-4 text-text",children:[(0,a.jsxs)("button",{className:"flex gap-4 items-center cursor-pointer bg-[#fbc2c8] hover:bg-[#f5a4ac] py-1 px-4 rounded-xl",onClick:s,children:[(0,a.jsx)(x.p7Q,{size:20}),(0,a.jsx)("p",{children:"Escanear QR"})]}),(0,a.jsxs)("details",{className:"card-user relative ",children:[(0,a.jsxs)("summary",{className:"flex gap-2 items-center cursor-pointer hover:bg-slate-100 py-1 px-4 rounded-xl",children:[(0,a.jsx)(m.d$e,{size:35}),(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-base font-semibold",children:"Administrador"}),(0,a.jsx)("span",{className:"text-gray-500 text-sm",children:"Perfil y ajustes"})]}),(0,a.jsx)(f.WnU,{size:20})]})]}),(0,a.jsxs)("ul",{className:"bg-mywhite p-4 rounded-b-xl absolute top-[100%] left-0 w-full shadow-md ",children:[(0,a.jsxs)("li",{className:"p-2 rounded-xl hover:bg-slate-100 flex gap-2 items-center relative",onClick:()=>y(),children:[(0,a.jsx)(m.VGZ,{}),(0,a.jsx)("p",{children:"Editar Cuenta"}),(0,a.jsx)("span",{id:"tooltip",className:" transition-opacity duration-300 ease-in-out absolute top-0  right-[118%] bg-[#fbc2c8] text-sm p-2 rounded-xl ".concat(g?"opacity-100":"opacity-0"),children:" pr\xf3ximamente"})]}),(0,a.jsxs)("li",{className:"p-2 rounded-xl hover:bg-slate-100 flex gap-2 items-center",onClick:()=>p(),children:[(0,a.jsx)(h.AMx,{size:17}),(0,a.jsx)("p",{children:"Cerrar sesi\xf3n"})]})]})]})]})]}),(0,a.jsx)("div",{className:"dashboard-list w-full min-h-[300px] bg-mywhite rounded-xl",children:(0,a.jsxs)("ul",{id:"orders-list ",children:[(0,a.jsxs)("li",{className:"p-6 border-t border-b border-light-gray grid grid-cols-8 gap-10 text-sm uppercase font-semibold text-gray-400 ",children:[(0,a.jsx)("section",{className:"flex justify-center",children:"Orden"}),(0,a.jsx)("section",{className:"flex justify-center",children:"Fecha"}),(0,a.jsx)("section",{className:"flex justify-start",children:"Producto"}),(0,a.jsx)("section",{className:"flex justify-center",children:"Salsas/Toppings"}),(0,a.jsx)("section",{className:"flex justify-center",children:"Extras"}),(0,a.jsx)("section",{className:"flex justify-center",children:"Metodo Pago"}),(0,a.jsx)("section",{className:"flex justify-center",children:"Estado"}),(0,a.jsx)("section",{className:"flex justify-center",children:"Total"})]}),t.map((e,s)=>(0,a.jsx)(j,{order:e},s))]})})]})})]})}},2461:(e,s,t)=>{"use strict";t.d(s,{s:()=>a});let a=(0,t(1319).io)(void 0)}},e=>{var s=s=>e(e.s=s);e.O(0,[711,320,479,512,446,873,486,565,441,517,358],()=>s(9728)),_N_E=e.O()}]);